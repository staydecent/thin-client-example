{"version":3,"sources":["client/app.js","client/components/Todo.js","client/services/pjaxRouter.js"],"names":["router","routes","node","document","getElementById","render","parent","animation","duration","exit","opacity","marginTop","preEnter","enter","window","onpopstate","navigate","location","pathname","ready","on","onNavClick","ev","preventDefault","target","getAttribute","checkUrl","items","title","console","log","map","opts","defaultOps","selector","handleRouting","route","hasOwnProperty","url","ajax","headers","success","resp","animate","replaceWith","css","pushState","history"],"mappings":"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","file":"server/assets/app.js","sourcesContent":["import $ from 'jquery'\n\nimport pjaxRouter from './services/pjaxRouter'\nimport Todo from './components/Todo'\n\nvar router = pjaxRouter({\n  routes: {\n    '/react': () => {\n      const node = document.getElementById('Todo')\n      Preact.render(<Todo />, node.parent, node)\n    }\n  },\n  animation: {\n    duration: 200,\n    exit: {\n      opacity: 0,\n      marginTop: '25px'\n    },\n    preEnter: {\n      opacity: 0,\n      marginTop: '25px'\n    },\n    enter: {\n      opacity: 1,\n      marginTop: '0px'\n    }\n  }\n})\n\n// Handle browser navigation (ex. back button)\nwindow.onpopstate = () =>\n  router.navigate(window.location.pathname)\n\n// Add our event listeners on nav links\n$(document).ready(() =>\n  $('.nav > a.button').on('click', function onNavClick (ev) {\n    ev.preventDefault()\n    router.navigate(ev.target.getAttribute('href'), {checkUrl: true})\n  })\n)\n","const items = [\n  { title: 'Try out some experimental libraries' },\n  { title: 'Do we really need vDom?' },\n  { title: 'Pick of some local raspber ries' }\n]\n\nexport default () =>\n  console.log('Todo') ||\n  <div>\n    <ul>\n      {items.map(({title}) => <h3>{title}</h3>)}\n    </ul>\n  </div>\n","import $ from 'jquery'\n\nexport default (opts) => {\n  const defaultOps = {\n    selector: '#pjax',\n    routes: {},\n    animation: {\n      exit: {\n        opacity: 0\n      },\n      preEnter: {\n        opacity: 0\n      },\n      enter: {\n        opacity: 1\n      },\n      duration: 500\n    }\n  }\n\n  opts = {...defaultOps, ...opts}\n\n  const handleRouting = () => {\n    const route = window.location.pathname\n    if (opts.routes.hasOwnProperty(route)) {\n      opts.routes[route]()\n    }\n  }\n\n  handleRouting()\n\n  // Load partial template from server and update pushState\n  const navigate = (url, {checkUrl}) => {\n    if (checkUrl && url === window.location.pathname) {\n      return\n    }\n    $.ajax({\n      url: url,\n      headers: {'X-PJAX': true},\n      success: (resp) => {\n        $(opts.selector).animate(\n          opts.animation.exit,\n          opts.animation.duration,\n          () => {\n            $(opts.selector).replaceWith(resp)\n            $(opts.selector)\n              .css(opts.animation.preEnter)\n              .animate(opts.animation.enter, opts.animation.duration)\n            pushState(url)\n            handleRouting()\n          }\n        )\n      }\n    })\n  }\n\n  return {\n    navigate,\n    handleRouting\n  }\n\n  // Simplified wrapper around history.pushState\n  function pushState (url) {\n    if (url !== window.location.pathname) {\n      window.history.pushState({}, '', url)\n    }\n  }\n}\n"]}