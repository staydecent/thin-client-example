{"version":3,"sources":["client/app.js","client/components/Todo.js","client/services/pjaxRouter.js"],"names":["router","routes","node","document","getElementById","render","parent","animation","duration","exit","opacity","marginTop","preEnter","enter","window","onpopstate","navigate","location","pathname","ready","on","onNavClick","ev","preventDefault","target","getAttribute","items","title","map","$","require","module","exports","opts","defaultOps","selector","extend","handleRouting","route","hasOwnProperty","url","ajax","headers","success","resp","animate","replaceWith","css","pushState","history"],"mappings":"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","file":"server/assets/app.js","sourcesContent":["import $ from 'jquery'\n\nimport pjaxRouter from './services/pjaxRouter'\nimport Todo from './components/Todo'\n\nvar router = pjaxRouter({\n  routes: {\n    '/react': () => {\n      const node = document.getElementById('Todo')\n      Preact.render(<Todo />, node.parent, node)\n    }\n  },\n  animation: {\n    duration: 200,\n    exit: {\n      opacity: 0,\n      marginTop: '25px'\n    },\n    preEnter: {\n      opacity: 0,\n      marginTop: '25px'\n    },\n    enter: {\n      opacity: 1,\n      marginTop: '0px'\n    }\n  }\n})\n\n// Handle browser navigation (ex. back button)\nwindow.onpopstate = () =>\n  router.navigate(window.location.pathname)\n\n// Add our event listeners on nav links\n$(document).ready(() =>\n  $('.nav > a.button').on('click', function onNavClick (ev) {\n    ev.preventDefault()\n    router.navigate(ev.target.getAttribute('href'))\n  })\n)\n","const items = [\n  { title: 'Try out some experimental libraries' },\n  { title: 'Do we really need vDom?' },\n  { title: 'Pick of some local raspber ries' }\n]\n\nexport default () =>\n  <div>\n    <ul>\n      {items.map(({title}) => <h3>{title}</h3>)}\n    </ul>\n  </div>\n","'use strict'\n\nvar $ = require('jquery')\n\nmodule.exports = function (opts) {\n  var defaultOps = {\n    selector: '#pjax',\n    routes: {},\n    animation: {\n      exit: {\n        opacity: 0\n      },\n      preEnter: {\n        opacity: 0\n      },\n      enter: {\n        opacity: 1\n      },\n      duration: 500\n    }\n  }\n\n  opts = $.extend(defaultOps, opts)\n\n  var handleRouting = function () {\n    var route = window.location.pathname\n    if (opts.routes.hasOwnProperty(route)) {\n      opts.routes[route]()\n    }\n  }\n\n  handleRouting()\n\n  return {\n    navigate: navigate,\n    handleRouting: handleRouting\n  }\n\n  // Load partial template from server and update pushState\n  function navigate (url) {\n    $.ajax({\n      url: url,\n      headers: { 'X-PJAX': true },\n      success: function (resp) {\n        $(opts.selector).animate(\n          opts.animation.exit,\n          opts.animation.duration,\n          function () {\n            $(opts.selector).replaceWith(resp)\n            $(opts.selector)\n              .css(opts.animation.preEnter)\n              .animate(opts.animation.enter, opts.animation.duration)\n            pushState(url)\n            handleRouting()\n          }\n        )\n      }\n    })\n  }\n\n  // Simplified wrapper around history.pushState\n  function pushState (url) {\n    if (url !== window.location.pathname) {\n      window.history.pushState({}, '', url)\n    }\n  }\n}\n"]}